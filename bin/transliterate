#!/usr/bin/env python

# abcdefghijklmnopqrstuvwxyz
# ABCDEFGHIJKLMNOPQRSTUVWXYZ  
# 0123456789  
# buttons: 10 11 12 13 14 15 16 17 18 19 20
# keys: ic pa sa ab wc IC PA SA AB WC
# circle: cd CD wz WZ Wz
# 10 11 12 13 14 15 16 17 18 19 20
# 21 22 23 24 25 26 27 28 29 30
# 31 32 33 34 35 36 37 38 39 40
# 41 42 43 44 45 46 47 48 49 50
# square:
# hv mv sd ss wc cl id ng ok vs hc ppv new sos hdr shv uhd vod cool free
# HV MV SD SS WC CL ID NG OK VS HC PPV NEW SOS HDR SHV UHD VOD COOL FREE
# 2k 4k 3d 8k 60p 120p 2K 4K 3D 8K 60P 5.1 7.1 22.2 120P
# futhark: -,;:.+ ce ci cy ch qu x y CE CI CY CH QU X Y th ae ng TH AE NG
# ogham: ng oi ia ae NG OI IA AE

import os
import sys
import random

from transliterate import get_available_language_codes, translit
from transliterate.base import TranslitLanguagePack, registry
from transliterate.discover import autodiscover

# validate args
prog = os.path.basename(sys.argv[0])
usage = """\
Syntax: %s <lang> [file]
        %s ls|list
"""
if "--help" in sys.argv or len(sys.argv) < 2:
    print(usage)
    sys.exit()

autodiscover()

class ButtonLanguagePack(TranslitLanguagePack):
    language_code = "buttons"
    language_name = "Button"
    mapping = (
        u"1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
        u"â¶â·â¸â¹âºâ»â¼â½â¾ðŸ„ŒðŸ…ðŸ…‘ðŸ…’ðŸ…“ðŸ…”ðŸ…•ðŸ…–ðŸ…—ðŸ…˜ðŸ…™ðŸ…šðŸ…›ðŸ…œðŸ…ðŸ…žðŸ…ŸðŸ… ðŸ…¡ðŸ…¢ðŸ…£ðŸ…¤ðŸ…¥ðŸ…¦ðŸ…§ðŸ…¨ðŸ…©ðŸ…ðŸ…‘ðŸ…’ðŸ…“ðŸ…”ðŸ…•ðŸ…–ðŸ…—ðŸ…˜ðŸ…™ðŸ…šðŸ…›ðŸ…œðŸ…ðŸ…žðŸ…ŸðŸ… ðŸ…¡ðŸ…¢ðŸ…£ðŸ…¤ðŸ…¥ðŸ…¦ðŸ…§ðŸ…¨ðŸ…©",
    )
    pre_processor_mapping = {
        u"11": u"â“«",
        u"12": u"â“¬",
        u"13": u"â“­",
        u"14": u"â“®",
        u"15": u"â“¯",
        u"16": u"â“°",
        u"17": u"â“±",
        u"18": u"â“²",
        u"19": u"â“³",
        u"20": u"â“´",
        u"10": u"âž“",

    }

class KeyLanguagePack(TranslitLanguagePack):
    language_code = "keys"
    language_name = "Key"
    mapping = (
        u"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",
        u"ðŸ…°ðŸ…±ðŸ…²ðŸ…³ðŸ…´ðŸ…µðŸ…¶ðŸ…·ðŸ…¸ðŸ…¹ðŸ…ºðŸ…»ðŸ…¼ðŸ…½ðŸ…¾ðŸ…¿ðŸ†€ðŸ†ðŸ†‚ðŸ†ƒðŸ†„ðŸ†…ðŸ††ðŸ†‡ðŸ†ˆðŸ†‰ðŸ…°ðŸ…±ðŸ…²ðŸ…³ðŸ…´ðŸ…µðŸ…¶ðŸ…·ðŸ…¸ðŸ…¹ðŸ…ºðŸ…»ðŸ…¼ðŸ…½ðŸ…¾ðŸ…¿ðŸ†€ðŸ†ðŸ†‚ðŸ†ƒðŸ†„ðŸ†…ðŸ††ðŸ†‡ðŸ†ˆðŸ†‰",
    )
    pre_processor_mapping = {
        u"0": "0ï¸âƒ£",
        u"1": "1ï¸âƒ£",
        u"2": "2ï¸âƒ£",
        u"3": "3ï¸âƒ£",
        u"4": "4ï¸âƒ£",
        u"5": "5ï¸âƒ£",
        u"6": "6ï¸âƒ£",
        u"7": "7ï¸âƒ£",
        u"8": "8ï¸âƒ£",
        u"9": "9ï¸âƒ£",
        u"ic" : u"ðŸ†‹",
        u"pa" : u"ðŸ†Œ",
        u"sa" : u"ðŸ†",
        u"ab" : u"ðŸ†Ž",
        u"wc" : u"ðŸ†",
        u"cl"  : u"ðŸ†‘",
        u"id"  : u"ðŸ†”",
        u"ng"  : u"ðŸ†–",
        u"ok"  : u"ðŸ†—",
        u"vs"  : u"ðŸ†š",
        u"new" : u"ðŸ†•",
        u"sos" : u"ðŸ†˜",
        u"cool": u"ðŸ†’",
        u"free": u"ðŸ†“",
        u"IC" : u"ðŸ†‹",
        u"PA" : u"ðŸ†Œ",
        u"SA" : u"ðŸ†",
        u"AB" : u"ðŸ†Ž",
        u"WC" : u"ðŸ†",
        u"CL"  : u"ðŸ†‘",
        u"ID"  : u"ðŸ†”",
        u"NG"  : u"ðŸ†–",
        u"OK"  : u"ðŸ†—",
        u"VS"  : u"ðŸ†š",
        u"NEW" : u"ðŸ†•",
        u"SOS" : u"ðŸ†˜",
        u"COOL": u"ðŸ†’",
        u"FREE": u"ðŸ†“",
    }

class CircleLanguagePack(TranslitLanguagePack):
    language_code = "circle"
    language_name = "Circle"
    mapping = (
        u"1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
        u"â‘ â‘¡â‘¢â‘£â‘¤â‘¥â‘¦â‘§â‘¨â“ªâ’¶â’·â’¸â’¹â’ºâ’»â’¼â’½â’¾â’¿â“€â“â“‚â“ƒâ“„â“…â“†â“‡â“ˆâ“‰â“Šâ“‹â“Œâ“â“Žâ“â“â“‘â“’â““â“”â“•â“–â“—â“˜â“™â“šâ“›â“œâ“â“žâ“Ÿâ“ â“¡â“¢â“£â“¤â“¥â“¦â“§â“¨â“©",
    )
    pre_processor_mapping = {
        u"CD"  : u"ðŸ„­",
        u"Wz"  : u"ðŸ„®",
        u"11"  : u"â‘ª",
        u"12"  : u"â‘«",
        u"13"  : u"â‘¬",
        u"14"  : u"â‘­",
        u"15"  : u"â‘®",
        u"16"  : u"â‘¯",
        u"17"  : u"â‘°",
        u"18"  : u"â‘±",
        u"19"  : u"â‘²",
        u"20"  : u"â‘³",
        u"10"  : u"â“¾",
        u"21"  : u"ã‰‘",
        u"22"  : u"ã‰’",
        u"23"  : u"ã‰“",
        u"24"  : u"ã‰”",
        u"25"  : u"ã‰•",
        u"26"  : u"ã‰–",
        u"27"  : u"ã‰—",
        u"28"  : u"ã‰˜",
        u"29"  : u"ã‰™",
        u"30"  : u"ã‰š",
        u"31"  : u"ã‰›",
        u"32"  : u"ã‰œ",
        u"33"  : u"ã‰",
        u"34"  : u"ã‰ž",
        u"35"  : u"ã‰Ÿ",
        u"36"  : u"ãŠ±",
        u"37"  : u"ãŠ²",
        u"38"  : u"ãŠ³",
        u"39"  : u"ãŠ´",
        u"40"  : u"ãŠµ",
        u"41"  : u"ãŠ¶",
        u"42"  : u"ãŠ·",
        u"43"  : u"ãŠ¸",
        u"44"  : u"ãŠ¹",
        u"45"  : u"ãŠº",
        u"46"  : u"ãŠ»",
        u"47"  : u"ãŠ¼",
        u"48"  : u"ãŠ½",
        u"49"  : u"ãŠ¾",
        u"50"  : u"ãŠ¿",
    }

class SquareLanguagePack(TranslitLanguagePack):
    language_code = "square"
    language_name = "Square"
    mapping = (
        u"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",
        u"ðŸ„°ðŸ„±ðŸ„²ðŸ„³ðŸ„´ðŸ„µðŸ„¶ðŸ„·ðŸ„¸ðŸ„¹ðŸ„ºðŸ„»ðŸ„¼ðŸ„½ðŸ„¾ðŸ„¿ðŸ…€ðŸ…ðŸ…‚ðŸ…ƒðŸ…„ðŸ……ðŸ…†ðŸ…‡ðŸ…ˆðŸ…‰ðŸ„°ðŸ„±ðŸ„²ðŸ„³ðŸ„´ðŸ„µðŸ„¶ðŸ„·ðŸ„¸ðŸ„¹ðŸ„ºðŸ„»ðŸ„¼ðŸ„½ðŸ„¾ðŸ„¿ðŸ…€ðŸ…ðŸ…‚ðŸ…ƒðŸ…„ðŸ……ðŸ…†ðŸ…‡ðŸ…ˆðŸ…‰",
    )
    pre_processor_mapping = {
        u"shv" : u"ðŸ†ª",
        u"hv"  : u"ðŸ…Š",
        u"mv"  : u"ðŸ…‹",
        u"sd"  : u"ðŸ…Œ",
        u"ss"  : u"ðŸ…",
        u"wc"  : u"ðŸ…",
        u"hc"  : u"ðŸ†¦",
        u"ppv" : u"ðŸ…Ž",
        u"hdr" : u"ðŸ†§",
        u"uhd" : u"ðŸ†«",
        u"vod" : u"ðŸ†¬",
        u"2k"  : u"ðŸ†",
        u"4k"  : u"ðŸ†ž",
        u"3d"  : u"ðŸ†›",
        u"8k"  : u"ðŸ†Ÿ",
        u"60p" : u"ðŸ†£",
        u"120p": u"ðŸ†¤",
        u"SHV" : u"ðŸ†§",
        u"HV"  : u"ðŸ…Š",
        u"MV"  : u"ðŸ…‹",
        u"SD"  : u"ðŸ…Œ",
        u"SS"  : u"ðŸ…",
        u"WC"  : u"ðŸ…",
        u"HC"  : u"ðŸ†¦",
        u"PPV" : u"ðŸ…Ž",
        u"HDR" : u"ðŸ†§",
        u"UHD" : u"ðŸ†«",
        u"VOD" : u"ðŸ†¬",
        u"2K"  : u"ðŸ†",
        u"4K"  : u"ðŸ†ž",
        u"3D"  : u"ðŸ†›",
        u"8K"  : u"ðŸ†Ÿ",
        u"60P" : u"ðŸ†£",
        u"5.1" : u"ðŸ† ",
        u"7.1" : u"ðŸ†¡",
        u"22.2": u"ðŸ†¢",
        u"120P": u"ðŸ†¤",
        u"0": "0ï¸âƒ£",
        u"1": "1ï¸âƒ£",
        u"2": "2ï¸âƒ£",
        u"3": "3ï¸âƒ£",
        u"4": "4ï¸âƒ£",
        u"5": "5ï¸âƒ£",
        u"6": "6ï¸âƒ£",
        u"7": "7ï¸âƒ£",
        u"8": "8ï¸âƒ£",
        u"9": "9ï¸âƒ£",
    }

class FutharkLanguagePack(TranslitLanguagePack):
    language_code = "futhark"
    language_name = "Elder Futhark"
    mapping = (
        u"fvuarkcqgwhnijpzstbemldoFVUARKCQGWHNIJPZSTBEMLDO.,:;-+0",
        u"áš áš áš¢áš¨áš±áš²áš²áš²áš·áš¹ášºáš¾á›á›ƒá›ˆá›‰á›Šá›á›’á›–á›—á›šá›žá›Ÿáš áš áš¢áš¨áš±áš²áš²áš²áš·áš¹ášºáš¾á›á›ƒá›ˆá›‰á›Šá›á›’á›–á›—á›šá›žá›Ÿá›«á›«á›¬á›¬á›­á›­á›«",

    )
    pre_processor_mapping = {
        u"ce": u"á›Šá›–",
        u"ci": u"á›Šá›",
        u"cy": u"á›Šá›‡",
        u"ch": u"á›ƒ",
        u"qu": u"áš²áš¹",
        u"x": u"áš²á›Š",
        u"y": u"á›‡",
        u"CE": u"á›Šá›–",
        u"CI": u"á›Šá›",
        u"CY": u"á›Šá›‡",
        u"CH": u"á›ƒ",
        u"QU": u"áš²áš¹",
        u"X": u"áš²á›Š",
        u"Y": u"á›‡",
        u"th": u"áš¦",
        u"ae": u"á›‡",
        u"ng": u"á›œ",
        u"TH": u"áš¦",
        u"AE": u"á›‡",
        u"NG": u"á›œ",
        u"1": "á›Ìµ",
        u"2": "á›Ì¿",
        u"3": "á›ÌµÌ¿",
        u"4": "á›Ì³Ì¿",
        u"5": "á›Í—",
        u"6": "á›ÌµÍ—",
        u"7": "áš½",
        u"8": "áš¿",
        u"9": "á›",
    }


class OghamLanguagePack(TranslitLanguagePack):
    language_code = "ogham"
    language_name = "Ogham"
    mapping = (
        u"0123456789 bvlfsnhdtckqmgzraoueiywpBVLFSNHDTCKQMGZRAOUEIYWP",
        u"áš€ášáš‚ášƒáš„áš…áš†áš‡ášˆáš‰áš€ášášáš‚ášƒáš„áš…áš†áš‡ášˆáš‰áš‰ášŠáš‹ášŒášŽášášáš‘áš’áš“áš”áš•áš—áššášášáš‚ášƒáš„áš…áš†áš‡ášˆáš‰áš‰ášŠáš‹ášŒášŽášášáš‘áš’áš“áš”áš•áš—ášš",
    )
    pre_processor_mapping = {
        u"j": u"áš‰áš†",
        u"x": u"áš‰áš„",
        u"ng": u"áš",
        u"oi": u"áš–",
        u"ia": u"áš˜",
        u"ae": u"áš™",
        u"J": u"áš‰áš†",
        u"X": u"áš‰áš„",
        u"NG": u"áš",
        u"OI": u"áš–",
        u"IA": u"áš˜",
        u"AE": u"áš™",
    }

class GothicLanguagePack(TranslitLanguagePack):
    language_code = "gothic"
    language_name = "Gothic"
    mapping = (
        u"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",
        u"ð”žð”Ÿð” ð”¡ð”¢ð”£ð”¤ð”¥ð”¦ð”§ð”¨ð”©ð”ªð”«ð”¬ð”­ð”®ð”¯ð”°ð”±ð”²ð”³ð”´ð”µð”¶ð”·ð”„ð”…â„­ð”‡ð”ˆð”‰ð”Šâ„Œâ„‘ð”ð”Žð”ð”ð”‘ð”’ð”“ð””â„œð”–ð”—ð”˜ð”™ð”šð”›ð”œâ„¨0123456789",
    )
    pre_processor_mapping = {
    }

class DoubleStruckLanguagePack(TranslitLanguagePack):
    language_code = "doublestruck"
    language_name = "DoubleStruck"
    mapping = (
        u"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",
        u"ð•’ð•“ð•”ð••ð•–ð•—ð•˜ð•™ð•šð•›ð•œð•ð•žð•Ÿð• ð•¡ð•¢ð•£ð•¤ð•¥ð•¦ð•§ð•¨ð•©ð•ªð•«ð”¸ð”¹â„‚ð”»ð”¼ð”½ð”¾â„ð•€ð•ð•‚ð•ƒð•„â„•ð•†â„™â„šâ„ð•Šð•‹ð•Œð•ð•Žð•ð•â„¤ðŸ˜ðŸ™ðŸšðŸ›ðŸœðŸðŸžðŸŸðŸ ðŸ¡",
    )
    pre_processor_mapping = {
    }

class ScriptLanguagePack(TranslitLanguagePack):
    language_code = "script"
    language_name = "Script"
    mapping = (
        u"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",
        u"ð’¶ð’·ð’¸ð’¹â„¯ð’»â„Šð’½ð’¾ð’¿ð“€ð“ð“‚ð“ƒâ„´ð“…ð“†ð“‡ð“ˆð“‰ð“Šð“‹ð“Œð“ð“Žð“ð’œâ„¬ð’žð’Ÿâ„°â„±ð’¢â„‹â„ð’¥ð’¦â„’â„³ð’©ð’ªð’«ð’¬â„›ð’®ð’¯ð’°ð’±ð’²ð’³ð’´ð’µ0123456789",
    )
    pre_processor_mapping = {
    }

class StrikethroughLanguagePack(TranslitLanguagePack):
    language_code = "strike"
    language_name = "Strikethrough"
    mapping = (
        u"",
        u"",
    )
    pre_processor_mapping = {
        u"a": u"ð–ºÌ¶",
        u"b": u"ð–»Ì¶",
        u"c": u"ð–¼Ì¶",
        u"d": u"ð–½Ì¶",
        u"e": u"ð–¾Ì¶",
        u"f": u"ð–¿Ì¶",
        u"g": u"ð—€Ì¶",
        u"h": u"ð—Ì¶",
        u"i": u"ð—‚Ì¶",
        u"j": u"ð—ƒÌ¶",
        u"k": u"ð—„Ì¶",
        u"l": u"ð—…Ì¶",
        u"m": u"ð—†Ì¶",
        u"n": u"ð—‡Ì¶",
        u"o": u"ð—ˆÌ¶",
        u"p": u"ð—‰Ì¶",
        u"q": u"ð—ŠÌ¶",
        u"r": u"ð—‹Ì¶",
        u"s": u"ð—ŒÌ¶",
        u"t": u"ð—Ì¶",
        u"u": u"ð—ŽÌ¶",
        u"v": u"ð—Ì¶",
        u"w": u"ð—Ì¶",
        u"x": u"ð—‘Ì¶",
        u"y": u"ð—’Ì¶",
        u"z": u"ð—“Ì¶",
        u"A": u"ð– Ì¶",
        u"B": u"ð–¡Ì¶",
        u"C": u"ð–¢Ì¶",
        u"D": u"ð–£Ì¶",
        u"E": u"ð–¤Ì¶",
        u"F": u"ð–¥Ì¶",
        u"G": u"ð–¦Ì¶",
        u"H": u"ð–§Ì¶",
        u"I": u"ð–¨Ì¶",
        u"J": u"ð–©Ì¶",
        u"K": u"ð–ªÌ¶",
        u"L": u"ð–«Ì¶",
        u"M": u"ð–¬Ì¶",
        u"N": u"ð–­Ì¶",
        u"O": u"ð–®Ì¶",
        u"P": u"ð–¯Ì¶",
        u"Q": u"ð–°Ì¶",
        u"R": u"ð–±Ì¶",
        u"S": u"ð–²Ì¶",
        u"T": u"ð–³Ì¶",
        u"U": u"ð–´Ì¶",
        u"V": u"ð–µÌ¶",
        u"W": u"ð–¶Ì¶",
        u"X": u"ð–·Ì¶",
        u"Y": u"ð–¸Ì¶",
        u"Z": u"ð–¹Ì¶",
        u"0": u"ðŸ¢Ì¶",
        u"1": u"ðŸ£Ì¶",
        u"2": u"ðŸ¤Ì¶",
        u"3": u"ðŸ¥Ì¶",
        u"4": u"ðŸ¦Ì¶",
        u"5": u"ðŸ§Ì¶",
        u"6": u"ðŸ¨Ì¶",
        u"7": u"ðŸ©Ì¶",
        u"8": u"ðŸªÌ¶",
        u"9": u"ðŸ«Ì¶",
    }

class UpsideDownLanguagePack(TranslitLanguagePack):
    language_code = "upside-down"
    language_name = "Upside Down"
    mapping = (
        u"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",
        u"ÉqÉ”pÇÉŸÆƒÉ¥á´‰É¾ÊžlÉ¯uodbÉ¹sÊ‡nÊŒÊxÊŽzâˆ€ð’Æ†á—¡ÆŽâ„²×¤HIÅ¿ê“˜Ë¥WNOÔ€á»Žá´šSâ”´âˆ©Î›MXâ…„Z0123456789",
    )
    pre_processor_mapping = {
    }

class CensoredLanguagePack(TranslitLanguagePack):
    language_code = "censored"
    language_name = "Censored"
    mapping = (
        u"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",
        u"â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ",
    )
    pre_processor_mapping = {
    }

registry.register(CensoredLanguagePack)
registry.register(UpsideDownLanguagePack)
registry.register(StrikethroughLanguagePack)
registry.register(DoubleStruckLanguagePack)
registry.register(ScriptLanguagePack)
registry.register(GothicLanguagePack)
registry.register(OghamLanguagePack)
registry.register(FutharkLanguagePack)
registry.register(SquareLanguagePack)
registry.register(CircleLanguagePack)
registry.register(KeyLanguagePack)
registry.register(ButtonLanguagePack)

class RansomLanguagePack(TranslitLanguagePack):
    language_code = "ransom"
    language_name = "Ransom"
    mapping = (
        u"AHMSVZahmsvz",
        u"ðŸ”¼â™“â™ðŸ’²â™ˆðŸ’¤ðŸ”¼â™“â™ðŸ’²â™ˆðŸ’¤",
    )
    pre_processor_mapping = {
        "c": "â˜ªï¸",
        "o": "ðŸŒ€",
        "r": "Â®ï¸",
        "t": "âœï¸",
        "u": "â›Ž",
        "x": "âŒ",
        "C": "â˜ªï¸",
        "O": "ðŸŒ€",
        "R": "Â®ï¸",
        "T": "âœï¸",
        "U": "â›Ž",
        "X": "âŒ",
        "!": "â—",
    }

registry.register(RansomLanguagePack)

# parse args
langcode = sys.argv[1]
if sys.argv[1] == "list" or sys.argv[1] == "ls":
    for lang in get_available_language_codes():
        print(lang)

    sys.exit()
elif len(sys.argv) > 2:
    infile = open(sys.argv[2])
else:
    infile = sys.stdin

# https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-for-loop
def lookahead(iterable):
    """Pass through all values from the given iterable, augmented by the
    information if there are more values to come after the current one
    (True), or if it is the last value (False).
    """
    # Get an iterator and pull the first value.
    it = iter(iterable)
    try:
        last = next(it)
    except StopIteration:
        sys.exit()
    # Run the iterator to exhaustion (starting from the second value).
    for val in it:
        # Report the *previous* value (more to come).
        yield last, True
        last = val
    # Report the last value.
    yield last, False

# do the thing
ransoms = ["square", "circle", "keys", "buttons", "script", "doublestruck"]
ransom = random.choice(ransoms)
if sys.argv[1] == "ogham": print("áš›", end="")
for line, hasmore in lookahead(infile):
    line = line.rstrip('\n')
    if line == "": continue
    end = "\n" if hasmore else ""
    if sys.argv[1] == "upside-down": line = line[::-1]
    if sys.argv[1] != "ransom":
        tr = translit(line, langcode)
    else:
        tr = u""
        for c in line:
            ransom = random.choice( list(set(ransoms) - set([ransom])) )
            C = random.choice( [c.upper(), c.lower()] )
            if C == translit(C, langcode):
                tr += translit(C, ransom)
            else:
                tr += translit(C, langcode)

    print(tr, end=end)

print("ášœ" if sys.argv[1] == "ogham" else "")

